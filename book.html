<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Booking Confirmation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
        color: #333;
        background: linear-gradient(to right, #78ffd6, #007991);
      }
      .home {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        min-height: 90vh;
        text-align: center;
        padding: 20px;
      }
      .content h3 {
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: #2d6a4f;
      }
      #details {
        background: #ffffff75;
        box-shadow: 0px 4px 6px rgba(221, 30, 30, 0.1);
        border-radius: 10px;
        padding: 20px;
        width: 70%;
        margin: 20px auto;
        text-align: left;
        line-height: 2;
      }
      #details input {
        width: 100%;
        padding: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      #success-message {
        margin-top: 10px;
      }
      #error-message {
        color: #d00000;
        font-size: 1.2rem;
        margin: 20px;
        display: none;
      }
      #error-message a {
        color: #023b59;
        text-decoration: none;
        font-weight: bold;
      }
      #error-message a:hover {
        text-decoration: underline;
      }
      button {
        background: #2d6a4f;
        color: #fff;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 1rem;
        cursor: pointer;
        margin: 10px;
      }
      button:hover {
        background: #40916c;
      }
    </style>
  </head>
  <body>
    <section class="home">
      <div class="content" id="booking-details">
        <h3 id="success-message" style="display: none">
          Your booking is successful!
        </h3>
        <p id="error-message">
          No booking data found. Please
          <a href="tourplanner.html">enter your booking details.</a>
        </p>
        <div id="details" style="display: none">
          <p>
            <strong>Name:</strong>
            <span id="name"></span>
            <input id="edit-name" type="text" style="display: none" />
          </p>
          <p>
            <strong>Place:</strong>
            <span id="place"></span>
            <input id="edit-place" type="text" style="display: none" />
          </p>
          <p>
            <strong>Guests:</strong>
            <span id="guests"></span>
            <input id="edit-guests" type="number" style="display: none" />
          </p>
          <p>
            <strong>Arrival Date:</strong>
            <span id="arrival"></span>
            <input id="edit-arrival" type="date" style="display: none" />
          </p>
          <p>
            <strong>Leaving Date:</strong>
            <span id="leaving"></span>
            <input id="edit-leaving" type="date" style="display: none" />
          </p>
        </div>
        <div id="button-container" style="display: none">
          <button id="edit-button" onclick="editDetails()">Edit</button>
          <button
            id="save-button"
            onclick="saveDetails()"
            style="display: none"
          >
            Save
          </button>
          <button
            id="cancel-button"
            onclick="cancelEdit()"
            style="display: none"
          >
            Cancel
          </button>
          <button id="home-button" onclick="goHome()">Home</button>
        </div>
      </div>
    </section>

    <script>
      const params = new URLSearchParams(window.location.search);
      const Name = params.get("Name") || localStorage.getItem("Name");
      const placeName =
        params.get("placeName") || localStorage.getItem("placeName");
      const guests = params.get("guests") || localStorage.getItem("guests");
      const arrivalDate =
        params.get("arrivalDate") || localStorage.getItem("arrivalDate");
      const leavingDate =
        params.get("leavingDate") || localStorage.getItem("leavingDate");

      function goHome() {
        localStorage.removeItem("Name");
        localStorage.removeItem("placeName");
        localStorage.removeItem("guests");
        localStorage.removeItem("arrivalDate");
        localStorage.removeItem("leavingDate");
        window.location.href = "tourplanner.html";
      }

      // Check if data exists
      if (Name && placeName && guests && arrivalDate && leavingDate) {
        document.getElementById("error-message").style.display = "none";
        document.getElementById("success-message").style.display = "block";
        document.getElementById("details").style.display = "block";
        document.getElementById("button-container").style.display = "block";

        // Fill in the booking details
        document.getElementById("name").textContent = Name;
        document.getElementById("place").textContent = placeName;
        document.getElementById("guests").textContent = guests;
        document.getElementById("arrival").textContent = arrivalDate;
        document.getElementById("leaving").textContent = leavingDate;
      } else {
        document.getElementById("error-message").style.display = "block";
        document.getElementById("button-container").style.display = "none";
      }

      function editDetails() {
        toggleEditMode(true);
      }

      function saveDetails() {
        document.getElementById("name").textContent =
          document.getElementById("edit-name").value;
        document.getElementById("place").textContent =
          document.getElementById("edit-place").value;
        document.getElementById("guests").textContent =
          document.getElementById("edit-guests").value;
        document.getElementById("arrival").textContent =
          document.getElementById("edit-arrival").value;
        document.getElementById("leaving").textContent =
          document.getElementById("edit-leaving").value;

        toggleEditMode(false);
      }

      function cancelEdit() {
        toggleEditMode(false);
      }

      function toggleEditMode(editMode) {
        const inputs = document.querySelectorAll("#details input");
        const spans = document.querySelectorAll("#details span");

        inputs.forEach((input, index) => {
          input.style.display = editMode ? "inline-block" : "none";
          spans[index].style.display = editMode ? "none" : "inline";
          if (editMode) input.value = spans[index].textContent;
        });

        document.getElementById("edit-button").style.display = editMode
          ? "none"
          : "inline-block";
        document.getElementById("save-button").style.display = editMode
          ? "inline-block"
          : "none";
        document.getElementById("cancel-button").style.display = editMode
          ? "inline-block"
          : "none";
      }
    </script>
  </body>
</html>
